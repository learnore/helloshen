# -*- coding: utf-8 -*-
"""
-------------------------------------------------
  IDE         : PyCharm
  File Name   : 11
  Description : å¾…ä¼˜åŒ–ä»£ç é€»è¾‘ todo

ğŸƒé¢˜ç›®æè¿°
ç®—æ³•å·¥ç¨‹å¸ˆå°æ˜é¢å¯¹ç€è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œ éœ€è¦å°†é€šä¿¡ç”¨çš„ä¿¡é“åˆ†é…ç»™å°½é‡å¤šçš„ç”¨æˆ·ï¼š
ä¿¡é“çš„æ¡ä»¶åŠåˆ†é…è§„åˆ™å¦‚ä¸‹ï¼š

1ã€æ‰€æœ‰ä¿¡é“éƒ½æœ‰å±æ€§ï¼šâ€œé˜¶â€ï¼Œé˜¶ä¸ºrçš„ä¿¡é“çš„å®¹é‡ä¸º2^ræ¯”ç‰¹ï¼›
2ã€æ‰€æœ‰ç”¨æˆ·éœ€è¦ä¼ è¾“çš„æ•°æ®é‡éƒ½ä¸€æ ·ï¼šDæ¯”ç‰¹ï¼›
3ã€ä¸€ä¸ªç”¨æˆ·å¯ä»¥åˆ†é…å¤šä¸ªä¿¡é“ï¼Œä½†æ¯ä¸ªä¿¡é“åªèƒ½åˆ†é…ç»™ä¸€ä¸ªç”¨æˆ·ï¼›
4ã€åªæœ‰å½“åˆ†é…ç»™ä¸€ä¸ªç”¨æˆ·çš„æ‰€æœ‰ä¿¡é“çš„å®¹é‡å’Œ>=Dï¼Œç”¨æˆ·æ‰èƒ½ä¼ è¾“æ•°æ®ï¼›

ç»™å‡ºä¸€ç»„ä¿¡é“èµ„æºï¼Œæœ€å¤šå¯ä»¥ä¸ºå¤šå°‘ç”¨æˆ·ä¼ è¾“æ•°æ®?

ğŸƒè¾“å…¥è¾“å‡º
è¾“å…¥
ç¬¬ä¸€è¡Œï¼Œä¸€ä¸ªæ•°å­—Rï¼ŒRä¸ºæœ€å¤§é˜¶æ•°ï¼Œ0<=R<20
ç¬¬äºŒè¡Œï¼ŒR+1ä¸ªæ•°å­—ï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼›ä»£è¡¨æ¯ç§ä¿¡é“çš„æ•°é‡Niï¼ŒæŒ‰ç…§é˜¶çš„å€¼ä»å°åˆ°å¤§æ’åˆ—0<=i<=Rï¼Œ0<=Ni<1000.
ç¬¬ä¸‰è¡Œï¼Œä¸€ä¸ªæ•°å­—Dï¼ŒDä¸ºå•ä¸ªç”¨æˆ·éœ€è¦ä¼ è¾“çš„æ•°æ®é‡ï¼Œ0<D<1000000

è¾“å‡º
ä¸€ä¸ªæ•°å­—ï¼Œä»£è¡¨æœ€å¤šå¯ä»¥ä¾›å¤šå°‘ç”¨æˆ·ä¼ è¾“æ•°æ®

ğŸƒæ ·ä¾‹1
è¾“å…¥
5
10 5 0 1 3 2
30
è¾“å‡º
4


ğŸƒæ ·ä¾‹2
è¾“å…¥
5
0 0 0 0 3 2
24
è¾“å‡º
3


  Summary     : 1ã€
                2ã€
                3ã€
  Author      : chenyushencc@gmail.com
  date        : 2024/1/22 15:21
-------------------------------------------------
"""
from collections import defaultdict


def solution(n, channels, channel_sum, client_datas):
    """
    è§£é¢˜æ€è·¯ï¼š
    1ã€æœ€å¤§æœ€ç¬¦åˆçš„ä¿¡é“å…ˆåˆ†é…
    2ã€å½“åˆšå¥½åˆ†é…è¶…è¿‡æ—¶ï¼Œåˆ™é€‰æ‹©æ›´ä½çš„ä¿¡é“åˆ†é…ï¼Œæ¯”å¦‚ 30 = 16 + 8 + 4 + 2 = 16 + 8 + 2 + 2 + 2ï¼ˆè‹¥æ²¡æœ‰4ä¿¡é“ï¼‰
    """
    results = 0
    while channel_sum > client_datas:

        temp_data = client_datas
        for i in range(n, -1, -1):
            if channels[2**i] and 2 ** i >= temp_data:       # å¦‚æœæœ‰ï¼Œä¸” ä¸€æ¡ä¿¡é“å°±èƒ½ä¼ ç”¨æˆ·æ•°æ®
                results += channels[2 ** i]
                channel_sum -= channels[2**i] * (2**i)            # è°ƒæ•´æ¶ˆè€—
                channels[2 ** i] = 0
                continue

            # ä¸€æ¡ä¿¡é“ä¸èƒ½ç›´æ¥è¦†ç›–æ•´ä¸ªæ•°æ®çš„
            if channels[2**i]:
                x, y = temp_data // (2**i), temp_data % (2**i)        # x æŒ‡æ¶ˆè€— 2**n ä¿¡é“çš„ä¸ªæ•°ï¼Œ y æŒ‡å‰©ä½™çš„ç”¨æˆ·æ•°æ®

                if x > channels[2 ** i]:                        # ä¸å¤Ÿä¼ ï¼ŒçŸ«æ­£ä¿¡æ¯
                    y += (x - channels[2 ** i]) * (2 ** i)      # å‰©ä½™çš„ç”¨æˆ·æ•°æ®
                    x = channels[2 ** i]

                    channels[2 ** i] = 0                        # å½’0

                else:
                    channels[2 ** i] -= x                       # æ¶ˆè€— x ä¸ª

                channel_sum -= x * (2 ** i)
                temp_data -= x * (2 ** i)

                if temp_data <= 0:
                    results += 1
                    break

        if temp_data:       # å…¨ç”¨æœ€å°çš„æ»¡è¶³çš„ä¿¡é“åˆ†é…
            for i in range(0, n+1):
                if channels[2**i]:
                    pass        # todo

    return results


if __name__ == "__main__":
    n = int(input())
    input_channels = list(map(int, input().strip().split(" ")))
    channel_sum = 0
    for i in range(len(input_channels)):
        channel_sum += 2**i * input_channels[i]

    channels = defaultdict(list)
    for i in range(n+1):
        channels[2**i] = input_channels[i]
    client_datas = int(input())

    print(solution(n, channels, channel_sum, client_datas))

